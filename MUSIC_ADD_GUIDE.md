# 🎵 添加音乐完整指南

## 方式1：通过音乐搜索添加（最方便）

### 前提条件
1. 确保音乐功能已启用（设置 > 常规 > 音乐功能）
2. （可选）配置S3存储，歌曲会永久保存

### 操作步骤
1. 在顶部搜索框输入歌手名或歌曲名，如：`方大同`
2. 按 **Enter** 键打开音乐搜索卡片
3. 浏览搜索结果：
   - 点击 **▶️ 播放按钮** 试听
   - 点击 **❤️ 爱心按钮** 添加到音乐列表
4. 添加后会显示实心红色爱心 ❤️
5. 关闭搜索卡片，点击右下角播放器的 📋 列表按钮查看

## 方式2：通过设置手动添加

### 操作步骤
1. 打开 **设置（齿轮图标）**
2. 进入 **常规** 标签页
3. 展开 **音乐功能** 折叠面板
4. 确保"启用音乐功能"开关已打开
5. 点击 **添加歌曲** 按钮
6. 填写歌曲信息：
   - 歌曲名称：如 `三人游`
   - 歌手名称：如 `方大同`
   - 歌曲URL：可以输入在线音乐链接，或点击上传按钮上传本地文件
   - 封面URL：可选
   - 歌词内容：可选
7. 点击 **添加** 按钮

## 方式3：批量添加（代码方式）

如果你想快速添加多首方大同的歌，可以打开浏览器控制台运行：

```javascript
// 获取设置上下文
const { updateMusicConfig } = window.__SETTINGS_CONTEXT__;

// 方大同歌曲列表（示例，需要替换为真实的音频URL）
const fanDaTongSongs = [
  {
    title: '三人游',
    artist: '方大同',
    musicUrl: '音频文件URL',
    coverUrl: '封面URL',
    lyrics: '',
    createdAt: new Date().toISOString()
  },
  {
    title: '爱爱爱',
    artist: '方大同',
    musicUrl: '音频文件URL',
    coverUrl: '封面URL',
    lyrics: '',
    createdAt: new Date().toISOString()
  }
];

// 添加到配置
const currentSongs = JSON.parse(localStorage.getItem('musicConfig') || '{}').customSongs || [];
updateMusicConfig({
  customSongs: [...currentSongs, ...fanDaTongSongs],
  lastModified: new Date().toISOString()
});
```

## 🔧 故障排查

### 问题1：搜索后无法添加歌曲
**可能原因**：
- 网络问题导致API调用失败
- 音乐功能未启用

**解决方案**：
1. 检查浏览器控制台是否有错误信息
2. 确认设置中"音乐功能"已开启
3. 尝试刷新页面重试

### 问题2：添加后在播放列表中看不到
**可能原因**：
- 歌曲添加到了自定义列表但未刷新
- 存储失败

**解决方案**：
1. 关闭并重新打开播放列表
2. 刷新页面
3. 检查浏览器控制台的localStorage

### 问题3：S3配置相关
**说明**：
- 不配置S3也可以添加歌曲
- 配置S3后，歌曲会上传到你的云存储，更稳定可靠
- S3配置在：设置 > 数据 > S3存储配置

## 推荐歌曲（方大同）

- 三人游
- 爱爱爱
- 小方
- 春风吹
- 苏丽珍
- Nothing Gonna Change My Love For You
- 特别的人
- 每个人都会
- 1234567
- 因为你

## 注意事项

1. 首次添加歌曲可能需要几秒钟加载时间
2. 如果启用了S3，上传过程会在后台进行，不会阻塞界面
3. 内置歌曲（如"鲜花"）无法删除
4. 自定义添加的歌曲可以随时删除或编辑

